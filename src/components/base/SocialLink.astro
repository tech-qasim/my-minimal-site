---
import { cn } from '~/lib/utils'
import NumberTicker from './NumberTicker'

interface Props extends Omit<astroHTML.JSX.AnchorHTMLAttributes, 'class' | 'children'> {
  icon: string
  count?: number
  label?: string
  tooltip?: string
  class?: string | Record<string, boolean>
}

const { label, icon, count, tooltip, class: className, ...props }: Props = Astro.props
---

<a
  class={cn(
    'group relative -m-1 p-1 ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded flex items-center gap-2 cursor-pointer',
    className
  )}
  {...props}
  target="_blank"
>
  <span class={cn('h-6 w-6 text-muted-foreground transition group-hover:text-primary', icon)}></span>
  {
    count !== undefined && (
      <span class="text-muted-foreground text-sm group-hover:text-primary">
        <NumberTicker play value={count} label={label} client:load />
      </span>
    )
  }
  {
    tooltip && (
      <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs bg-zinc-900 dark:bg-zinc-50 text-zinc-50 dark:text-zinc-900 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50">
        {tooltip}
        <span class="absolute top-full left-1/2 -translate-x-1/2 border-x-4 border-x-transparent border-t-4 border-t-zinc-900 dark:border-t-zinc-50" />
      </span>
    )
  }
</a>
